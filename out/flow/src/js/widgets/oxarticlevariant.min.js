!function(i){var r={_create:function(){i("ul.vardrop a").click(t),i("div.variantReset a").click(a),i("form.js-oxWidgetReload").submit(e),i("form.js-oxProductForm").submit(e)},reload:function(t,a,e,n){return i("#zoomModal").remove(),oxAjax.ajax(t,{targetEl:a,iconPosEl:i("#variants .dropDown"),additionalData:n,onSuccess:function(t){i(e).parent().html(t),"undefined"!=typeof WidgetsHandler&&(WidgetsHandler.reloadWidget("oxwarticledetails"),WidgetsHandler.reloadWidget("oxwrating"),WidgetsHandler.reloadWidget("oxwreview"))}}),!1},resetVariantSelections:function(){n()}};function t(t){var a=i(this);if(a.parents().hasClass("js-disabled")?n():i("form.js-oxProductForm input[name=anid]").attr("value",i("form.js-oxProductForm input[name=parentid]").attr("value")),0<a.parents(".js-fnSubmit").length){i("input:hidden",a.parents("div.dropDown")).val(a.data("selection-id"));var e=i("form.js-oxWidgetReload");i("input[name=fnc]",e).val(""),e.submit()}return!1}function a(t){n();var a=i("form.js-oxWidgetReload");return i("input[name=fnc]",a).val(""),a.submit(),!1}function n(){for(var t=i("form.js-oxProductForm input[name^=varselid], form.js-oxWidgetReload input[name^=varselid]"),a=0;a<t.length;a++)i(t[a]).attr("value","");i("form.js-oxProductForm input[name=anid]").attr("value",i("form.js-oxProductForm input[name=parentid]").attr("value"))}function e(){var a={},t=i(this);if(!i("input[name='fnc']",this).val()){if(i("input[name=aid]",this).val()==i("input[name=parentid]",this).val()){var e=i("input[name^=varselid]",i("form.js-oxProductForm"));if(e.length){var n="";if(e.each(function(t){n=n+t+":"+i(this).val()+"|",a[i(this).attr("name")]=i(this).val()}),-1===jQuery.inArray(n,oxVariantSelections))return r.reload(i(t),i("#details_container"),i("#details_container")[0],a)}}return r.reload(i(t),i("#details_container"),i("#details_container")[0],a)}}i.widget("ui.oxArticleVariant",r)}(jQuery);