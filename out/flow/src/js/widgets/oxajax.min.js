!function($){oxAjax={loadingScreen:{start:function(t,n){var a=Array();return $(t).each(function(){var t=document.createElement("div");if(t.innerHTML='<div class="loadingfade"></div><div class="loadingicon"></div><div class="loadingiconbg"></div>',$("div",t).css({position:"absolute",left:$(this).offset().left-10,top:$(this).offset().top-10,width:$(this).width()+20,height:$(this).height()+20}),n&&n.length){var e=Math.round(n.offset().left-10-$(this).offset().left+n.width()/2),o=n.offset().top,r=Math.round(o-10-$(this).offset().top+(n.last().offset().top-o+n.last().height())/2);$("div.loadingiconbg, div.loadingicon",t).css({"background-position":e+"px "+r+"px"})}$("div.loadingfade",t).css({opacity:0}).animate({opacity:.55},200),$("body").append(t),a.push(t)}),a},stop:function(t){$.each(t,function(t,e){$("div",e).not(".loadingfade").remove(),$("div.loadingfade",e).stop(!0,!0).animate({opacity:0},100,function(){$(e).remove()})})}},updatePageErrors:function(t){if(t.length){var e,o=$("#content > .status.error");if(0==o.length&&($("#content").prepend("<div class='status error corners'>"),o=$("#content > .status.error")),o)for(o.children().remove(),e=0;e<t.length;e++){var r=document.createElement("p");$(r).append(document.createTextNode(t[e])),o.append(r)}}else $("#content > .status.error").remove()},ajax:function(t,r){var n=this,o={},e="",a="";"FORM"==t[0].tagName?($("input",t).each(function(){if("checkbox"==this.type&&!this.checked)return!0;o[this.name]=this.value}),e=t.attr("action"),a=t.attr("method")):"A"==t[0].tagName&&(e=t.attr("href")),r.additionalData&&$.each(r.additionalData,function(t,e){o[t]=e});var i={},s=Array();for(var c in o)o.hasOwnProperty(c)&&s.push(c);s.sort().forEach(function(t){i[t]=o[t]});var d=null;r.targetEl&&(d=n.loadingScreen.start(r.targetEl,r.iconPosEl)),a=a||"get",jQuery.ajax({data:i,url:e,type:a,timeout:3e4,beforeSend:function(t,e){e.url=e.url.replace("&&","&")},error:function(t,e,o){d&&n.loadingScreen.stop(d),r.onError&&r.onError(t,e,o)},success:function(t){d&&n.loadingScreen.stop(d),null!=t.debuginfo&&t.debuginfo&&$("body").append(t.debuginfo),null!=t.errors&&null!=t.errors.default?n.updatePageErrors(t.errors.default):n.updatePageErrors([]),r.onSuccess&&r.onSuccess(t,o)}})},reportJSError:function(t){"undefined"!=typeof console&&void 0!==console.error&&console.error(t)},evalScripts:function(container){var self=this;try{$("script",container).each(function(){try{if(""!=this.src&&0==$('body > script[src="'+this.src+'"]').length)return $("body").append(this),document.body.appendChild(this),!0;eval(this.innerHTML)}catch(t){self.reportJSError(t)}$(this).remove()})}catch(t){self.reportJSError(t)}}},$.widget("ui.oxAjax",oxAjax)}(jQuery);